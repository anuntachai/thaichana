(function(e){function t(t){for(var a,c,s=t[0],i=t[1],u=t[2],l=0,d=[];l<s.length;l++)c=s[l],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function c(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f4c2bdd1"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=c(e);var u=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}r[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/thaichana/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var h=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="4678"},"4ffd":function(e,t,n){e.exports=n.p+"img/logo.e5305734.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-navigation-drawer",{attrs:{app:""}}),a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Thaichana",contain:"",src:n("4ffd"),transition:"scale-transition",width:"120"}}),a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Thaichana",contain:"","min-width":"100",src:n("4ffd"),width:"100"}})],1),a("v-spacer"),a("v-btn",{attrs:{href:"https://www.ไทยชนะ.com",target:"_blank",text:""}},[a("span",{staticClass:"mr-2"},[e._v("ไทยชนะ")]),a("v-icon",[e._v("mdi-open-in-new")])],1)],1),a("v-content",[a("v-container",[a("router-view")],1)],1),a("v-bottom-navigation",{attrs:{app:"",grow:"",color:"teal"},model:{value:e.activeFooterNavBtn,callback:function(t){e.activeFooterNavBtn=t},expression:"activeFooterNavBtn"}},[a("v-btn",{attrs:{value:"Scan"},on:{click:function(t){return e.changePage("/scan")}}},[a("span",[e._v("Scan QR")]),a("v-icon",[e._v("mdi-qrcode-scan")])],1),a("v-btn",{attrs:{value:"Shops"},on:{click:function(t){return e.changePage("/shops")}}},[a("span",[e._v("Shops")]),a("v-badge",{attrs:{color:"success",content:e.activeCheckIn,value:e.activeCheckIn,overlap:"","offset-x":"2"}},[a("v-icon",[e._v("mdi-home-city-outline")])],1)],1),a("v-btn",{attrs:{value:"Timeline"},on:{click:function(t){return e.changePage("/timeline")}}},[a("span",[e._v("Timeline")]),a("v-icon",[e._v("mdi-timeline-clock-outline")])],1),a("v-btn",{attrs:{value:"Register"},on:{click:function(t){return e.changePage("/register")}}},[a("span",[e._v("Register")]),a("v-icon",[e._v("mdi-account-edit-outline")])],1)],1)],1)},o=[],c={name:"App",components:{},data:function(){return{activeFooterNavBtn:"Shops"}},computed:{activeCheckIn:function(){return this.$store.getters.activeCheckIn}},methods:{changePage:function(e){this.$router.push(e)}}},s=c,i=n("2877"),u=n("6544"),l=n.n(u),h=n("7496"),d=n("40dc"),f=n("4ca6"),m=n("b81c"),p=n("8336"),v=n("a523"),b=n("a75b"),g=n("132d"),k=n("adda"),j=n("f774"),y=n("2fa4"),w=Object(i["a"])(s,r,o,!1,null,null,null),_=w.exports;l()(w,{VApp:h["a"],VAppBar:d["a"],VBadge:f["a"],VBottomNavigation:m["a"],VBtn:p["a"],VContainer:v["a"],VContent:b["a"],VIcon:g["a"],VImg:k["a"],VNavigationDrawer:j["a"],VSpacer:y["a"]});var T=n("9483");Object(T["a"])("".concat("/thaichana/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("99af"),n("7db0"),n("4160"),n("13d5"),n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("159b"),n("ddb0"),n("2b3d"),n("96cf");var x=n("1da1"),I=n("2f62"),S=n("d4ec"),C=n("bee2"),O=n("c1df"),V=function(){function e(t,n){Object(S["a"])(this,e),this.id=t,this.appId=n,this.info=null,this.checkInTime=null,this.checkOutTime=null,this.history=[]}return Object(C["a"])(e,[{key:"toString",value:function(){return"Shop: "+this.shopId}},{key:"copy",value:function(e){var t=this;this.id=e.id||this.id,this.appId=e.appId||this.appId,this.info=e.info||this.info,e.checkInTime&&(this.checkInTime=new Date(e.checkInTime)),e.checkOutTime&&(this.checkOutTime=new Date(e.checkOutTime)),e.history&&(this.history=[],e.history.forEach((function(e){t.history.push({checkInTime:new Date(e.checkInTime),checkOutTime:e.checkOutTime?new Date(e.checkOutTime):null})})))}},{key:"clearHistory",value:function(e){var t=[],n=O();n.subtract(e,"days"),this.history.forEach((function(e){n.isBefore(e.checkInTime)&&t.push(e)})),this.history=t}},{key:"compare",value:function(e){return this.isStay&&!e.isStay?-1:!this.isStay&&e.isStay?1:e.checkInTime-this.checkInTime}},{key:"isShop",value:function(e){return this.id===e||this.id===e.id}},{key:"checkIn",value:function(){this.checkInTime=new Date,this.checkOutTime=null,this.history.push({checkInTime:this.checkInTime,checkOutTime:this.checkOutTime})}},{key:"checkOut",value:function(){this.checkOutTime=new Date,this.history[this.history.length-1].checkOutTime=this.checkOutTime}},{key:"isStay",get:function(){return this.checkInTime&&!this.checkOutTime}},{key:"stayTime",get:function(){var e=this.checkInTime||new Date,t=this.checkOutTime||new Date;return t-e}}]),e}(),D=V,N=n("bc3a"),R=n("c1df");a["a"].use(I["a"]);var z=new I["a"].Store({modules:{},state:{mobileNumber:null,authKey:null,authTime:null,expiredIn:null,shops:[]},mutations:{checkIn:function(e,t){t.checkIn(),e.shops.sort((function(e,t){return e.compare(t)}))},checkOut:function(e,t){t.checkOut(),e.shops.sort((function(e,t){return e.compare(t)}))},clearHistory:function(e,t){e.shops.forEach((function(e){e.clearHistory(t)}))},setMobileNumber:function(e,t){e.mobileNumber=t},setAuthValue:function(e,t){var n=t.authKey,a=t.authTime,r=t.expiredIn;e.authKey=n,e.authTime=a,e.expiredIn=r}},actions:{restoreState:function(e){var t=e.state,n=e.commit;if(console.log("Restoring state ..."),t.mobileNumber=localStorage.mobileNumber||null,t.authKey=localStorage.authKey||null,t.authTime=new Date(localStorage.authTime)||null,t.expiredIn=localStorage.expiredIn||null,t.shops=[],localStorage.shops){var a=JSON.parse(localStorage.shops);for(var r in a){var o=a[r],c=new D(o.id,o.appId);c.copy(o),t.shops.push(c)}}console.log("State restored!"),console.log("Cleaning history longer than 28 days..."),n("clearHistory",14),console.log("Cleaned!")},saveState:function(e){var t=e.state;console.log("Saving state ..."),localStorage.mobileNumber=t.mobileNumber,localStorage.authKey=t.authKey,localStorage.authTime=t.authTime,localStorage.expiredIn=t.expiredIn,localStorage.shops=JSON.stringify(t.shops),console.log(localStorage.shops),console.log("State saved!")},auth:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.commit,o=e.dispatch,console.log("Authenticating..."),c=null,s=new Date,i=null,n.prev=5,n.next=8,N({method:"post",url:"https://api-scanner.suk-sa-ard.com/register",data:{mobileNumber:t}});case 8:u=n.sent,console.log(u),c=u.data.token,i=1e3*parseInt(u.data.expiredIn),c&&(a.mobileNumber!==t&&r("clearHistory",0),r("setMobileNumber",t),r("setAuthValue",{authKey:c,authTime:s,expiredIn:i}),o("saveState"),console.log("Authenticated!")),n.next=19;break;case 15:return n.prev=15,n.t0=n["catch"](5),console.error(n.t0),n.abrupt("return");case 19:case"end":return n.stop()}}),n,null,[[5,15]])})))()},updateAuthKey:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,a=e.dispatch,console.log("check for update authKey..."),r=R(n.authTime),r.add(n.expiredIn,"milliseconds"),o=R(),!r.isBefore(o)){t.next=10;break}return t.next=8,a("auth",n.mobileNumber);case 8:t.next=11;break;case 10:console.log("authKey is valid. do not update authKey.");case 11:case"end":return t.stop()}}),t)})))()},extractShopUrl:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c,s,i,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.state,r=e.dispatch,o=null,c=null,n.prev=3,s=new URL(t),i=new URLSearchParams(s.search),c=i.get("appId"),o=i.get("shopId"),n.next=14;break;case 10:return n.prev=10,n.t0=n["catch"](3),console.error("Cannot get shopId from url: "+t),n.abrupt("return",null);case 14:if(u=a.shops.find((function(e){return e.id===o&&e.appId===c})),u){n.next=31;break}return u=new D(o,c),console.log("Get Info of shop: "+o),n.prev=18,n.next=21,N({method:"get",url:"https://api-customer.thaichana.com/shop/".concat(c,"/").concat(o,"/qr")});case 21:l=n.sent,console.log(l),u.info=l.data,n.next=29;break;case 26:n.prev=26,n.t1=n["catch"](18),console.error(n.t1);case 29:a.shops.push(u),r("saveState");case 31:return n.abrupt("return",u);case 32:case"end":return n.stop()}}),n,null,[[3,10],[18,26]])})))()},checkIn:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c,s,i,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.commit,o=e.dispatch,console.log("Checking-In Shop: "+t.id),n.next=4,o("updateAuthKey");case 4:return c=Date.now(),n.prev=5,s={method:"post",url:"https://api-customer.thaichana.com/checkin?t=".concat(c),headers:{authorization:a.authKey},data:{appId:t.appId,shopId:t.id}},n.next=9,N(s);case 9:i=n.sent,console.log(i),u=i.data.message,"ok"===u?(r("checkIn",t),o("saveState"),l=new Date(c),console.log("Checked-in! "+l)):console.error("Cannot check-in!!!!"),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](5),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[5,15]])})))()},checkOut:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c,s,i,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.commit,o=e.dispatch,console.log("Checking-Out Shop: "+t.id),n.next=4,o("updateAuthKey");case 4:return c=Date.now(),n.prev=5,s={method:"post",url:"https://api-customer.thaichana.com/checkout?t=".concat(c),headers:{authorization:a.authKey},data:{appId:t.appId,shopId:t.id}},n.next=9,N(s);case 9:i=n.sent,console.log(i),u=i.data.message,"ok"===u?(l=new Date(parseInt(i.data.usageTime)),l/=1e3,r("checkOut",t),o("saveState"),console.log("Checked-out! usage time: "+l+" sec")):console.error("Cannot check-out!!!!"),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](5),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[5,15]])})))()}},getters:{isAuth:function(e){return null!=e.authKey},authKey:function(e){return e.authKey},authTime:function(e){return e.authTime},sortedShops:function(e){return e.shops},activeCheckIn:function(e){return e.shops.reduce((function(e,t){return e+(t.isStay?1:0)}),0)},mobileNumber:function(e){return e.mobileNumber},timeline:function(e){var t=[];return e.shops.forEach((function(e){e.history.forEach((function(n){t.push({shop:e,checkInTime:n.checkInTime,checkOutTime:n.checkOutTime})}))})),t.sort((function(e,t){return t.checkInTime-e.checkInTime})),t}}});z.dispatch("restoreState");var A=z,$=n("8c4f"),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{align:"center",justify:"center"}},[n("v-icon",{attrs:{"x-large":""}},[e._v("mdi-badge-account-horizontal-outline")])],1)],1),n("v-card",{staticClass:"mx-auto"},[n("v-card-title",[e._v("REGISTER")]),n("v-card-text",[n("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{counter:10,rules:e.mobileNumberRules,label:"เบอร์มือถือ",required:""},model:{value:e.mobileNumber,callback:function(t){e.mobileNumber=t},expression:"mobileNumber"}})],1)],1),n("v-card-actions",[n("v-btn",{staticClass:"mr-4",attrs:{block:"",disabled:!e.valid,color:"success"},on:{click:function(t){return e.submitMobileNumber()}}},[e._v(" ลงทะเบียน ")])],1)],1),n("v-divider"),n("v-card",{staticClass:"mx-auto"},[n("v-card-title",[e._v("เบอร์ที่ลงทะเบียนล่าสุด")]),n("v-card-text",{staticClass:"headline font-weight-bold"},[n("v-icon",[e._v("mdi-cellphone-iphone")]),e._v(" "+e._s(e.currentMobileNumber)+" ")],1),n("v-card-subtitle",[n("v-icon",[e._v("mdi-cellphone-key")]),e._v(" Authentication Key: "),n("br"),e._v(e._s(e.authKey)),n("br"),n("br"),n("v-icon",[e._v("mdi-clock-time-four-outline")]),e._v(" Authenticated Time: "),n("br"),e._v(e._s(e.authTime))],1),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"deep-purple accent-4"},on:{click:e.reAuth}},[e._v(" Re-auth ")])],1)],1)],1)},q=[],E=(n("466d"),{name:"Register",data:function(){return{valid:!0,mobileNumber:"",mobileNumberRules:[function(e){return!!e||"กรุณาใส่เบอร์โทรศัพท์มือถือ 10 หลัก"},function(e){return null!=e.match(/^0{1}\d{9}$/)||"กรุณาใส่เบอร์โทรศัพท์มือถือ 10 หลัก : 0xxxxxxxxx"}]}},components:{},computed:{currentMobileNumber:function(){return this.$store.getters.mobileNumber},authKey:function(){return this.$store.getters.authKey||""},authTime:function(){return this.$store.getters.authTime||""}},methods:{validate:function(){this.$refs.registerForm.validate()},reset:function(){this.$refs.registerForm.reset()},resetValidation:function(){this.$refs.registerForm.resetValidation()},submitMobileNumber:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth",e.mobileNumber);case 2:case"end":return t.stop()}}),t)})))()},reAuth:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth",e.currentMobileNumber);case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.mobileNumber=this.currentMobileNumber||""}}),B=E,P=n("b0af"),M=n("99d9"),F=n("62ad"),L=n("ce7e"),U=n("4bd4"),Q=n("0fd9"),H=n("8654"),J=Object(i["a"])(B,K,q,!1,null,null,null),Y=J.exports;l()(J,{VBtn:p["a"],VCard:P["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:F["a"],VContainer:v["a"],VDivider:L["a"],VForm:U["a"],VIcon:g["a"],VRow:Q["a"],VTextField:H["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"text-center"},[n("h3",[e._v("Scan QR")])]),n("div",[e.shop?e._e():n("qrcode-stream",{on:{decode:e.onDecode}})],1),null!=e.shop?n("div",[e.shop.info?n("v-card",[n("v-card-title",[e._v(e._s(e.shop.info.shopName))]),n("v-card-subtitle",[e._v(e._s(e.shop.id)+" | "+e._s(e.shop.info.businessType))]),n("v-card-text",[e._v("Status: "+e._s(e.shop.info.status)),n("br"),e._v("CanCheckIn: "+e._s(e.shop.info.canCheckin))]),n("v-card-actions",[e.shop.isStay?e._e():n("v-btn",{attrs:{block:"",color:"success"},on:{click:function(t){return e.checkIn(e.shop)}}},[e._v("Check-In")]),e.shop.isStay?n("v-btn",{attrs:{block:"",color:"error"},on:{click:function(t){return e.checkOut(e.shop)}}},[e._v("Check-Out")]):e._e()],1)],1):e._e(),e.dialog?n("CheckInStatusDialog",{attrs:{visible:e.dialog,checkInTime:e.shop.checkInTime,place:e.shop.info.shopName},on:{close:function(t){return e.closeDialog()}}}):e._e()],1):e._e()])},W=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-text",{attrs:{align:"center"}},[n("v-icon",{attrs:{color:"success",size:"80"}},[e._v("mdi-map-marker")])],1),n("v-card-text",{attrs:{align:"center"}},[n("h1",[e._v("เช็คอินแล้ว")])]),n("v-card-text",{attrs:{align:"center"}},[e._v(" "+e._s(e._f("formatTime")(e.checkInTime))+" ")]),n("v-card-text",{attrs:{align:"center"}},[e._v(" "+e._s(e.place)+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){e.show=!1}}},[e._v(" Ok ")])],1)],1)],1)],1)},Z=[],ee={name:"CheckInStatusDialog",props:{visible:{type:Boolean,default:!1},checkInTime:{type:Date,default:Date.now()},place:{type:String,default:""}},computed:{show:{get:function(){return this.visible},set:function(e){e||this.$emit("close")}}}},te=ee,ne=n("169a"),ae=Object(i["a"])(te,X,Z,!1,null,"0c923ad2",null),re=ae.exports;l()(ae,{VBtn:p["a"],VCard:P["a"],VCardActions:M["a"],VCardText:M["c"],VDialog:ne["a"],VIcon:g["a"],VRow:Q["a"],VSpacer:y["a"]});var oe={name:"Scan",components:{CheckInStatusDialog:re},data:function(){return{checkInURL:null,shop:null,dialog:!1}},computed:{},methods:{onDecode:function(e){console.log("QR decode: "+e),e.length>10&&(this.checkInURL=e,this.getShopInfo())},getShopInfo:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("extractShopUrl",e.checkInURL);case 3:n=t.sent,e.shop=n,console.log(e.shop),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Cannot get shop from qr data: "+e.checkInURL);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},checkIn:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("checkIn",e);case 2:t.dialog=!0;case 3:case"end":return n.stop()}}),n)})))()},checkOut:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("checkOut",e);case 2:t.goToShops();case 3:case"end":return n.stop()}}),n)})))()},closeDialog:function(){this.dialog=!1,this.goToShops()},goToShops:function(){this.$router.push({name:"Shops"})}},created:function(){},mounted:function(){}},ce=oe,se=Object(i["a"])(ce,G,W,!1,null,null,null),ie=se.exports;l()(se,{VBtn:p["a"],VCard:P["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VContainer:v["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{attrs:{dense:""}},[e._l(e.shops,(function(t){return n("v-col",{key:t.id,attrs:{cols:"12"}},[n("v-card",{attrs:{color:"light-blue darken-4",dark:""}},[n("v-container",[n("v-row",{staticClass:"p-0",attrs:{justify:"space-between"}},[n("v-col",{staticClass:"p-0",attrs:{cols:"9"}},[n("v-card-title",{staticClass:"headline",domProps:{textContent:e._s(t.info.shopName)}}),n("v-card-subtitle",{domProps:{textContent:e._s(t.info.businessType)}}),n("v-card-text",[t.isStay?e._e():n("div",[n("v-icon",[e._v("mdi-home-export-outline")]),e._v(" "+e._s(e._f("formatTime")(t.checkOutTime))+" ("+e._s(e._f("formatTimeVisited")(t.checkOutTime))+") ")],1),t.isStay?n("div",[n("v-icon",[e._v("mdi-clock-time-four-outline")]),e._v(" "+e._s(e._f("formatTimer")(t.checkInTime))+" ")],1):e._e()])],1),n("v-col",{staticClass:"text-center p-0",attrs:{cols:"3"}},[n("v-row",{staticClass:"flex-column ma-0 fill-height",attrs:{justify:"center"}},[n("v-col",{staticClass:"px-0"},[t.isStay?e._e():n("v-btn",{attrs:{height:"70",width:"70",color:"success",dark:"","x-small":""},on:{click:function(n){return e.checkIn(t)}}},[e._v("Check-In")]),t.isStay?n("v-btn",{attrs:{height:"70",width:"70",color:"error",dark:"","x-small":""},on:{click:function(n){return e.checkOut(t)}}},[e._v("Check-Out")]):e._e()],1),n("v-col",{staticClass:"px-0"},[n("v-btn",{attrs:{"x-large":"",icon:""},on:{click:function(n){return e.showQr(t)}}},[n("v-icon",[e._v("mdi-qrcode")])],1)],1)],1)],1)],1)],1)],1)],1)})),e.checkInDialog?n("CheckInStatusDialog",{attrs:{visible:e.checkInDialog,checkInTime:e.currentShop.checkInTime,place:e.currentShop.info.shopName},on:{close:function(t){e.checkInDialog=!1}}}):e._e(),e.qrDialog?n("QRCodeDialog",{attrs:{visible:e.qrDialog,shop:e.currentShop},on:{close:function(t){e.qrDialog=!1}}}):e._e()],2)],1)},le=[],he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{attrs:{align:"center"}},[e._v(" "+e._s(e.shop.info.shopName)+" ")]),n("v-card-text",{attrs:{align:"center"}},[n("qrcode-vue",{attrs:{value:e.qrData,level:"L",size:"250",renderAs:"canvas",background:"#ffffff",foreground:"#000000"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){e.show=!1}}},[e._v(" Ok ")])],1)],1)],1)],1)},de=[],fe=n("d7b0"),me={name:"QRCodeDialog",components:{QrcodeVue:fe["a"]},props:{visible:{type:Boolean,default:!1},shop:{type:D}},computed:{show:{get:function(){return this.visible},set:function(e){e||this.$emit("close")}},qrData:function(){return"https://qr.thaichana.com/?appId=".concat(this.shop.appId,"&shopId=").concat(this.shop.id)}}},pe=me,ve=Object(i["a"])(pe,he,de,!1,null,"33cfdf0f",null),be=ve.exports;l()(ve,{VBtn:p["a"],VCard:P["a"],VCardActions:M["a"],VCardText:M["c"],VCardTitle:M["d"],VDialog:ne["a"],VRow:Q["a"],VSpacer:y["a"]});var ge={name:"Shops",data:function(){return{checkInDialog:!1,qrDialog:!1,currentShop:null}},components:{CheckInStatusDialog:re,QRCodeDialog:be},computed:{shops:function(){return this.$store.getters.sortedShops},stayTime:function(e){return Date.now()-e.checkInTime}},methods:{checkIn:function(e){this.$store.dispatch("checkIn",e),this.currentShop=e,this.checkInDialog=!0},checkOut:function(e){this.$store.dispatch("checkOut",e)},showQr:function(e){this.currentShop=e,this.qrDialog=!0}},created:function(){},mounted:function(){}},ke=ge,je=Object(i["a"])(ke,ue,le,!1,null,null,null),ye=je.exports;l()(je,{VBtn:p["a"],VCard:P["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:F["a"],VContainer:v["a"],VIcon:g["a"],VRow:Q["a"]});var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",e._l(e.timeline,(function(t,a){return n("v-timeline",{key:a,attrs:{"align-top":"",dense:""}},[e.isDate(t)?n("v-timeline-item",{staticClass:"mb-4",attrs:{color:"indigo darken-4","icon-color":"white",icon:"mdi-calendar-month","fill-dot":""}},[n("p",{staticClass:"font-weight-black"},[e._v(e._s(e._f("formatDateOnly")(t)))])]):e._e(),e.isDate(t)?e._e():n("v-timeline-item",{staticClass:"mb-4",attrs:{color:"success","icon-color":"white",icon:"mdi-map-marker","fill-dot":"",small:""}},[n("v-row",{attrs:{justify:"space-between"}},[n("v-col",{attrs:{cols:"10"}},[n("div",[e._v(e._s(t.shop.info.shopName))]),t.checkOutTime?n("div",[n("p",{staticClass:"text--disabled"},[n("v-icon",{attrs:{small:""}},[e._v("mdi-home-export-outline")]),e._v(" "+e._s(e._f("formatShortTime")(t.checkOutTime))+" ")],1)]):e._e()]),n("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[e._v(e._s(e._f("formatTimeOnly")(t.checkInTime)))])],1)],1)],1)})),1)},_e=[],Te=n("c1df"),xe={name:"Timeline",data:function(){return{}},components:{},computed:{timeline:function(){var e=this.$store.getters.timeline,t=e.reduce((function(e,t){var n=e,a=e.find((function(e){return Te(t.checkInTime).isSame(e,"day")}));return a||n.push(new Date(t.checkInTime)),n}),[]);return e=e.concat(t),e.sort((function(e,t){return e instanceof Date&&t instanceof Date?t-e:e instanceof Date?Te(e).isBefore(t.checkInTime,"day")?1:-1:t instanceof Date?Te(e.checkInTime).isBefore(t,"day")?1:-1:t.checkInTime-e.checkInTime})),e}},methods:{isDate:function(e){return e instanceof Date}},created:function(){},mounted:function(){}},Ie=xe,Se=n("8414"),Ce=n("1e06"),Oe=Object(i["a"])(Ie,we,_e,!1,null,null,null),Ve=Oe.exports;l()(Oe,{VCol:F["a"],VContainer:v["a"],VIcon:g["a"],VRow:Q["a"],VTimeline:Se["a"],VTimelineItem:Ce["a"]});var De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"fill-height":""}},[n("iframe",{staticStyle:{overflow:"hidden",height:"100%",width:"100%"},attrs:{frameborder:"0",height:"100%",width:"100%",src:"https://merchant.thaichana.com/search"}})])},Ne=[],Re={name:"SearchShop",data:function(){return{}},components:{},computed:{},methods:{},created:function(){},mounted:function(){}},ze=Re,Ae=(n("60c1"),Object(i["a"])(ze,De,Ne,!1,null,"ebd68456",null)),$e=Ae.exports;l()(Ae,{VContainer:v["a"]}),a["a"].use($["a"]);var Ke=[{path:"/register",name:"Register",component:Y},{path:"/scan",name:"Scan",component:ie,meta:{requiresAuth:!0}},{path:"/shops",name:"Shops",component:ye,alias:"/",meta:{requiresAuth:!0}},{path:"/timeline",name:"Timeline",component:Ve},{path:"/searchshop",name:"SearchShop",component:$e},{path:"/test",name:"Test",component:function(){return n.e("about").then(n.bind(null,"78c1"))}}],qe=new $["a"]({mode:"history",base:"/thaichana/",routes:Ke});qe.beforeEach((function(e,t,n){console.log(e),console.log("Mobile number: ",A.getters.mobileNumber),console.log("isAuth = ",A.getters.isAuth),e.meta.requiresAuth&&!A.getters.isAuth?(console.log("Need register!!!!"),n("/register")):(console.log("No need register!!!"),n())}));var Ee=qe,Be=(n("4989"),n("ab8b"),n("9a3e")),Pe=n("f309");a["a"].use(Pe["a"]);var Me=new Pe["a"]({}),Fe=n("c1df");Fe.locale("TH"),a["a"].config.productionTip=!1,a["a"].use(Be["default"]),a["a"].filter("formatTimer",(function(e){if(e)return Fe(String(e)).fromNow(!0)})),a["a"].filter("formatTimeVisited",(function(e){if(e)return Fe(String(e)).fromNow()})),a["a"].filter("formatTime",(function(e){if(e)return Fe(String(e)).format("llll")})),a["a"].filter("formatShortTime",(function(e){if(e)return Fe(String(e)).format("DD/MM/YYYY HH:mm")})),a["a"].filter("formatDateOnly",(function(e){if(e)return Fe(String(e)).format("LL")})),a["a"].filter("formatTimeOnly",(function(e){if(e)return Fe(String(e)).format("LT")})),new a["a"]({router:Ee,store:A,render:function(e){return e(_)},vuetify:Me,beforeCreate:function(){console.log("beforeCreate: mobileNumber = ",A.getters.mobileNumber)},mounted:function(){console.log("mounted: mobileNumber = ",A.getters.mobileNumber)}}).$mount("#app")},5955:function(e,t,n){},"60c1":function(e,t,n){"use strict";var a=n("5955"),r=n.n(a);r.a}});
//# sourceMappingURL=app.4830aa26.js.map